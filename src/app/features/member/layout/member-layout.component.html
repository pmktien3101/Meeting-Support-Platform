<div class="member-layout">
  <!-- Sidebar -->
  <aside class="sidebar" [class.collapsed]="sidebarCollapsed()">
    <div class="sidebar-header">
      <div class="logo">
        <span class="logo-icon">ğŸ‘¤</span>
        <span class="logo-text" *ngIf="!sidebarCollapsed()">Member Portal</span>
      </div>
      <button 
        class="sidebar-toggle"
        (click)="toggleSidebar()"
        title="Toggle sidebar"
      >
        <span class="toggle-icon">{{ sidebarCollapsed() ? 'â†’' : 'â†' }}</span>
      </button>
    </div>

    <nav class="sidebar-nav">
      <ul class="nav-list">
        <li 
          *ngFor="let item of menuItems" 
          class="nav-item"
        >
          <a 
            [routerLink]="item.route"
            routerLinkActive="active"
            class="nav-link"
            [title]="sidebarCollapsed() ? item.label : ''"
          >
            <span class="nav-icon">{{ item.icon }}</span>
            <span class="nav-label" *ngIf="!sidebarCollapsed()">{{ item.label }}</span>
            <span 
              class="nav-badge" 
              *ngIf="item.badge && !sidebarCollapsed()"
            >
              {{ item.badge }}
            </span>
          </a>
        </li>
      </ul>
    </nav>

    <div class="sidebar-footer" *ngIf="!sidebarCollapsed()">
      <div class="user-info">
        <div class="user-avatar">{{ currentUser().avatar }}</div>
        <div class="user-details">
          <div class="user-name">{{ currentUser().name }}</div>
          <div class="user-role">{{ currentUser().role }}</div>
        </div>
      </div>
    </div>
  </aside>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Topbar -->
    <header class="topbar">
      <div class="topbar-left">
        <h1 class="page-title">{{ getPageTitle() }}</h1>
      </div>
      
      <div class="topbar-right">
        <!-- Notifications -->
        <div class="notifications">
          <button class="notification-btn" (click)="toggleNotifications()">
            <span class="notification-icon">ğŸ””</span>
            <span class="notification-badge" *ngIf="notificationCount() > 0">{{ notificationCount() }}</span>
          </button>
        </div>

        <!-- User Menu -->
        <div class="user-menu">
          <button 
            class="user-menu-toggle"
            (click)="toggleUserMenu()"
            title="Menu ngÆ°á»i dÃ¹ng"
          >
            <div class="user-avatar-small">{{ currentUser().avatar }}</div>
            <span class="user-name-small" *ngIf="!sidebarCollapsed()">{{ currentUser().name }}</span>
            <span class="dropdown-icon">â–¼</span>
          </button>

          <div class="user-dropdown" *ngIf="userMenuOpen()">
            <div class="dropdown-header">
              <div class="dropdown-avatar">{{ currentUser().avatar }}</div>
              <div class="dropdown-user-info">
                <div class="dropdown-name">{{ currentUser().name }}</div>
                <div class="dropdown-email">{{ currentUser().email }}</div>
              </div>
            </div>
            
            <div class="dropdown-menu">
              <a routerLink="/member/profile" class="dropdown-item">
                <span class="item-icon">ğŸ‘¤</span>
                Há»“ SÆ¡ CÃ¡ NhÃ¢n
              </a>
              <a routerLink="/member/settings" class="dropdown-item">
                <span class="item-icon">âš™ï¸</span>
                CÃ i Äáº·t
              </a>
              <a routerLink="/member/change-password" class="dropdown-item">
                <span class="item-icon">ğŸ”’</span>
                Äá»•i Máº­t Kháº©u
              </a>
              <div class="dropdown-divider"></div>
              <button 
                class="dropdown-item logout-item"
                (click)="logout()"
              >
                <span class="item-icon">ğŸšª</span>
                ÄÄƒng Xuáº¥t
              </button>
            </div>
          </div>
        </div>
      </div>
    </header>

    <!-- Page Content -->
    <div class="page-content">
      <router-outlet></router-outlet>
    </div>
  </main>
</div>
