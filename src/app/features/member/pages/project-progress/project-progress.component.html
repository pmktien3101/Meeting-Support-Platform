<div class="project-progress-page">
  <!-- Page Header -->
  <div class="page-header">
    <div class="header-content">
      <h1 class="page-title">Tiáº¿n Äá»™ Dá»± Ãn</h1>
      <p class="page-subtitle">Theo dÃµi tiáº¿n Ä‘á»™ vÃ  milestone cá»§a cÃ¡c dá»± Ã¡n báº¡n tham gia</p>
    </div>
    <div class="header-actions">
      <button class="btn btn-outline" (click)="refreshProgress()">
        <span class="btn-icon">ğŸ”„</span>
        LÃ m Má»›i
      </button>
      <button class="btn btn-primary" (click)="exportProgress()">
        <span class="btn-icon">ğŸ“Š</span>
        Xuáº¥t BÃ¡o CÃ¡o
      </button>
    </div>
  </div>

  <!-- Project Stats -->
  <div class="project-stats">
    <div class="stat-item">
      <div class="stat-icon">ğŸ“Š</div>
      <div class="stat-content">
        <div class="stat-number">{{ projectStats().total }}</div>
        <div class="stat-label">Tá»•ng Dá»± Ãn</div>
      </div>
    </div>
    <div class="stat-item">
      <div class="stat-icon">â³</div>
      <div class="stat-content">
        <div class="stat-number">{{ projectStats().inProgress }}</div>
        <div class="stat-label">Äang Thá»±c Hiá»‡n</div>
      </div>
    </div>
    <div class="stat-item">
      <div class="stat-icon">âœ…</div>
      <div class="stat-content">
        <div class="stat-number">{{ projectStats().completed }}</div>
        <div class="stat-label">ÄÃ£ HoÃ n ThÃ nh</div>
      </div>
    </div>
    <div class="stat-item">
      <div class="stat-icon">ğŸ¯</div>
      <div class="stat-content">
        <div class="stat-number">{{ projectStats().averageProgress }}%</div>
        <div class="stat-label">Tiáº¿n Äá»™ Trung BÃ¬nh</div>
      </div>
    </div>
  </div>

  <!-- Projects Grid -->
  <div class="projects-grid">
    <div *ngFor="let project of projects()" class="project-card">
      <div class="project-header">
        <div class="project-info">
          <h3 class="project-title">{{ project.name }}</h3>
          <span class="project-status" [class]="project.status">
            {{ getStatusText(project.status) }}
          </span>
        </div>
        <div class="project-priority" [class]="'priority-' + project.priority">
          {{ getPriorityText(project.priority) }}
        </div>
      </div>
      
      <div class="project-progress">
        <div class="progress-info">
          <span class="progress-text">Tiáº¿n Ä‘á»™</span>
          <span class="progress-percentage">{{ project.progress }}%</span>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" [style.width.%]="project.progress"></div>
        </div>
      </div>
      
      <div class="project-details">
        <div class="detail-row">
          <span class="detail-label">ğŸ‘¤ Quáº£n lÃ½:</span>
          <span class="detail-value">{{ project.manager }}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">â° Deadline:</span>
          <span class="detail-value" [class.overdue]="isOverdue(project.deadline)">
            {{ project.deadline }}
          </span>
        </div>
        <div class="detail-row">
          <span class="detail-label">ğŸ“‹ Nhiá»‡m vá»¥:</span>
          <span class="detail-value">{{ project.completedTasks }}/{{ project.totalTasks }}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">ğŸ‘¥ ThÃ nh viÃªn:</span>
          <span class="detail-value">{{ project.teamSize }} ngÆ°á»i</span>
        </div>
      </div>
      
      <div class="project-milestones" *ngIf="project.milestones.length > 0">
        <h4 class="milestones-title">Milestone</h4>
        <div class="milestones-list">
          <div 
            *ngFor="let milestone of project.milestones" 
            class="milestone-item"
            [class.completed]="milestone.completed"
          >
            <div class="milestone-status">
              <span class="status-icon">{{ milestone.completed ? 'âœ…' : 'â³' }}</span>
            </div>
            <div class="milestone-content">
              <div class="milestone-title">{{ milestone.title }}</div>
              <div class="milestone-date">{{ milestone.date }}</div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="project-actions">
        <button type="button" class="btn btn-sm btn-outline" (click)="viewProjectDetails(project)">
          <span class="btn-icon">ğŸ‘ï¸</span>
          Chi Tiáº¿t
        </button>
        <button type="button" class="btn btn-sm btn-outline" (click)="viewProjectTasks(project)">
          <span class="btn-icon">ğŸ“‹</span>
          Nhiá»‡m Vá»¥
        </button>
        <button type="button" class="btn btn-sm btn-primary" (click)="viewProjectTimeline(project)">
          <span class="btn-icon">ğŸ“…</span>
          Timeline
        </button>
      </div>
    </div>
    
    <div *ngIf="projects().length === 0" class="empty-state">
      <div class="empty-icon">ğŸ“Š</div>
      <h3>KhÃ´ng cÃ³ dá»± Ã¡n nÃ o</h3>
      <p>Báº¡n chÆ°a Ä‘Æ°á»£c giao dá»± Ã¡n nÃ o hoáº·c táº¥t cáº£ dá»± Ã¡n Ä‘Ã£ hoÃ n thÃ nh</p>
    </div>
  </div>

  <!-- Quick Actions Panel -->
  <div class="quick-actions-panel">
    <div class="panel-header">
      <h3>Thao TÃ¡c Nhanh</h3>
    </div>
    <div class="panel-content">
      <button class="quick-action-btn" (click)="viewActiveProjects()">
        <span class="action-icon">ğŸš€</span>
        <span class="action-text">Dá»± Ãn Äang Thá»±c Hiá»‡n</span>
      </button>
      <button class="quick-action-btn" (click)="viewCompletedProjects()">
        <span class="action-icon">âœ…</span>
        <span class="action-text">Dá»± Ãn ÄÃ£ HoÃ n ThÃ nh</span>
      </button>
      <button class="quick-action-btn" (click)="viewProjectReports()">
        <span class="action-icon">ğŸ“ˆ</span>
        <span class="action-text">BÃ¡o CÃ¡o Tiáº¿n Äá»™</span>
      </button>
      <button class="quick-action-btn" (click)="viewTeamPerformance()">
        <span class="action-icon">ğŸ‘¥</span>
        <span class="action-text">Hiá»‡u Suáº¥t Team</span>
      </button>
    </div>
  </div>

  <!-- Modals -->
  <!-- Details Modal -->
  <div class="modal-backdrop" *ngIf="isDetailsOpen" (click)="closeDetails()"></div>
  <div class="modal modal-md" *ngIf="isDetailsOpen" role="dialog" aria-modal="true">
    <div class="modal-header">
      <h3>Chi tiáº¿t dá»± Ã¡n - {{ activeProject?.name }}</h3>
      <button type="button" class="icon-btn" (click)="closeDetails()">âœ–</button>
    </div>
    <div class="modal-body">
      <div class="details-grid">
        <div><strong>Tráº¡ng thÃ¡i:</strong> {{ activeProject ? getStatusText(activeProject.status) : '' }}</div>
        <div><strong>Äá»™ Æ°u tiÃªn:</strong> {{ activeProject ? getPriorityText(activeProject.priority) : '' }}</div>
        <div><strong>Tiáº¿n Ä‘á»™:</strong> {{ activeProject?.progress }}%</div>
        <div><strong>Quáº£n lÃ½:</strong> {{ activeProject?.manager }}</div>
        <div><strong>Deadline:</strong> {{ activeProject?.deadline }}</div>
        <div><strong>Team size:</strong> {{ activeProject?.teamSize }}</div>
        <div><strong>Nhiá»‡m vá»¥:</strong> {{ activeProject?.completedTasks }}/{{ activeProject?.totalTasks }}</div>
      </div>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-outline" (click)="closeDetails()">ÄÃ³ng</button>
    </div>
  </div>

  <!-- Tasks Modal -->
  <div class="modal-backdrop" *ngIf="isTasksOpen" (click)="closeTasks()"></div>
  <div class="modal modal-md" *ngIf="isTasksOpen" role="dialog" aria-modal="true">
    <div class="modal-header">
      <h3>Nhiá»‡m vá»¥ - {{ activeProject?.name }}</h3>
      <button type="button" class="icon-btn" (click)="closeTasks()">âœ–</button>
    </div>
    <div class="modal-body">
      <div class="todo-item" *ngFor="let t of taskItems">
        <input type="checkbox" [checked]="t.done" disabled>
        <div class="todo-content">
          <div class="todo-text" [class.done]="t.done">{{ t.title }}</div>
          <div class="todo-meta">
            <span *ngIf="t.assignee">ğŸ‘¤ {{ t.assignee }}</span>
            <span *ngIf="t.due">â° {{ t.due }}</span>
          </div>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-outline" (click)="closeTasks()">ÄÃ³ng</button>
    </div>
  </div>

  <!-- Timeline Modal -->
  <div class="modal-backdrop" *ngIf="isTimelineOpen" (click)="closeTimeline()"></div>
  <div class="modal modal-lg" *ngIf="isTimelineOpen" role="dialog" aria-modal="true">
    <div class="modal-header">
      <h3>Timeline - {{ activeProject?.name }}</h3>
      <button type="button" class="icon-btn" (click)="closeTimeline()">âœ–</button>
    </div>
    <div class="modal-body scrollable">
      <div class="timeline-list">
        <div class="timeline-item" *ngFor="let e of timelineEvents" [class]="e.type">
          <div class="dot"></div>
          <div class="content">
            <div class="top">
              <span class="badge" [class]="e.type">{{ e.type }}</span>
              <span class="date">{{ e.date }}</span>
            </div>
            <div class="label">{{ e.label }}</div>
          </div>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-outline" (click)="closeTimeline()">ÄÃ³ng</button>
    </div>
  </div>
</div>