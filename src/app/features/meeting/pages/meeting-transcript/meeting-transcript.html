<div class="meeting-transcript">
  <!-- Loading State -->
  <div *ngIf="isLoading()" class="loading-state">
    <div class="spinner"></div>
    <p>Loading transcript...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error()" class="error-state">
    <div class="error-icon">⚠️</div>
    <h3>Error Loading Transcript</h3>
    <p>{{ error() }}</p>
    <button class="btn btn-primary" (click)="loadTranscript()">Try Again</button>
  </div>

  <!-- Transcript Content -->
  <div *ngIf="!isLoading() && meetingInfo()" class="transcript-content">
    <!-- Header -->
    <div class="transcript-header">
      <div class="header-content">
        <h1>Meeting Transcript</h1>
        <p class="meeting-title">{{ meetingInfo()!.title }}</p>
        <div class="meeting-meta">
          <span class="meta-item">
            <span class="icon">📅</span>
            {{ meetingInfo()!.date | date:'MMM dd, yyyy' }}
          </span>
          <span class="meta-item">
            <span class="icon">⏰</span>
            {{ formatDuration(meetingInfo()!.duration * 60) }}
          </span>
          <span class="meta-item">
            <span class="icon">👥</span>
            {{ meetingInfo()!.participants.length }} participants
          </span>
        </div>
      </div>
      
      <div class="header-actions">
        <button class="btn btn-secondary" (click)="navigateToDetail()">
          <span class="icon">📋</span>
          Meeting Details
        </button>
        <button class="btn btn-primary" (click)="navigateToSummary()">
          <span class="icon">📊</span>
          View Summary
        </button>
      </div>
    </div>

    <!-- Controls -->
    <div class="transcript-controls">
      <div class="search-section">
        <div class="search-box">
          <input 
            type="text" 
            placeholder="Search transcript..." 
            [(ngModel)]="searchTerm"
            class="search-input"
          >
          <span class="search-icon">🔍</span>
        </div>
      </div>
      
      <div class="filter-section">
        <select [(ngModel)]="selectedSpeaker" class="filter-select" title="Select speaker" aria-label="Select speaker">
          <option value="all">All Speakers</option>
          <option *ngFor="let speaker of speakers()" [value]="speaker">{{ speaker }}</option>
        </select>
        
        <div class="view-options">
          <label class="checkbox-label">
            <input type="checkbox" [(ngModel)]="showTimestamps">
            <span class="checkmark"></span>
            Show Timestamps
          </label>
        </div>
      </div>
      
      <div class="action-section">
        <button class="btn btn-outline" (click)="copyTranscript()">
          <span class="icon">📋</span>
          Copy
        </button>
        <button class="btn btn-outline" (click)="downloadTranscript()">
          <span class="icon">⬇️</span>
          Download
        </button>
      </div>
    </div>

    <!-- Transcript Stats -->
    <div class="transcript-stats">
      <div class="stat-item">
        <span class="stat-label">Total Entries:</span>
        <span class="stat-value">{{ filteredTranscript.length }}</span>
      </div>
      <div class="stat-item">
        <span class="stat-label">Speakers:</span>
        <span class="stat-value">{{ speakers.length }}</span>
      </div>
      <div class="stat-item">
        <span class="stat-label">Duration:</span>
        <span class="stat-value">{{ formatDuration(meetingInfo()!.duration * 60) }}</span>
      </div>
    </div>

    <!-- Transcript Entries -->
    <div class="transcript-entries">
      <div 
        *ngFor="let entry of filteredTranscript(); let i = index" 
        class="transcript-entry"
        [class.highlighted]="searchTerm() && (entry.text.toLowerCase().includes(searchTerm().toLowerCase()) || entry.speaker.toLowerCase().includes(searchTerm().toLowerCase()))"
      >
        <div class="entry-header">
          <div class="speaker-info">
            <div class="speaker-avatar">
              {{ entry.speaker.charAt(0) }}
            </div>
            <div class="speaker-details">
              <span class="speaker-name">{{ entry.speaker }}</span>
              <span *ngIf="showTimestamps()" class="timestamp">{{ entry.timestamp }}</span>
            </div>
          </div>
          
          <div class="entry-meta">
            <span class="confidence" [class]="getConfidenceColor(entry.confidence)">
              {{ (entry.confidence * 100).toFixed(0) }}% confidence
            </span>
            <span class="duration">{{ formatDuration(entry.duration) }}</span>
          </div>
        </div>
        
        <div class="entry-text">
          {{ entry.text }}
        </div>
      </div>
    </div>

    <!-- Empty State -->
    <div *ngIf="filteredTranscript.length === 0" class="empty-state">
      <div class="empty-icon">📝</div>
      <h3>No transcript entries found</h3>
      <p>Try adjusting your search or filter criteria.</p>
    </div>
  </div>
</div>
