<div class="meeting-detail">
  <!-- Loading State -->
  <div *ngIf="isLoading()" class="loading-state">
    <div class="spinner"></div>
    <p>Loading meeting details...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error()" class="error-state">
    <div class="error-icon">⚠️</div>
    <h3>Error Loading Meeting</h3>
    <p>{{ error() }}</p>
    <button class="btn btn-primary" (click)="loadMeetingDetail()">Try Again</button>
  </div>

  <!-- Meeting Details -->
  <div *ngIf="!isLoading() && meeting()" class="meeting-content">
    <!-- Header -->
    <div class="meeting-header">
      <div class="header-content">
        <h1>{{ meeting()!.title }}</h1>
        <p class="meeting-description">{{ meeting()!.description }}</p>
        <div class="meeting-meta">
          <span class="badge" [class]="getStatusBadgeClass(meeting()!.status)">
            {{ meeting()!.status }}
          </span>
          <span class="meta-item">
            <span class="icon">👤</span>
            Host: {{ meeting()!.host }}
          </span>
          <span class="meta-item">
            <span class="icon">📅</span>
            {{ meeting()!.startTime | date:'MMM dd, yyyy' }}
          </span>
          <span class="meta-item">
            <span class="icon">⏰</span>
            {{ meeting()!.startTime | date:'HH:mm' }} - {{ meeting()!.endTime | date:'HH:mm' }}
            ({{ formatDuration(meeting()!.duration) }})
          </span>
        </div>
      </div>
      
      <div class="header-actions">
        <button 
          *ngIf="meeting()!.status === 'scheduled'"
          class="btn btn-primary" 
          (click)="joinMeeting()"
        >
          <span class="icon">🎥</span>
          Join Meeting
        </button>
        <button 
          *ngIf="meeting()!.recordingUrl"
          class="btn btn-secondary"
          (click)="openRecording()"
        >
          <span class="icon">📹</span>
          View Recording
        </button>
        <button 
          *ngIf="meeting()!.transcriptUrl"
          class="btn btn-outline"
          (click)="navigateToTranscript()"
        >
          <span class="icon">📝</span>
          View Transcript
        </button>
        <button 
          *ngIf="meeting()!.summaryUrl"
          class="btn btn-outline"
          (click)="navigateToSummary()"
        >
          <span class="icon">📊</span>
          View Summary
        </button>
      </div>
    </div>

    <!-- Meeting Info Grid -->
    <div class="meeting-grid">
      <!-- Meeting Details Card -->
      <div class="info-card">
        <h3>Meeting Information</h3>
        <div class="info-list">
          <div class="info-item">
            <span class="label">Platform:</span>
            <span class="value">{{ meeting()!.meetingType | titlecase }}</span>
          </div>
          <div class="info-item">
            <span class="label">Meeting Link:</span>
            <div class="value-with-action">
              <span class="value">{{ meeting()!.meetingLink }}</span>
              <button 
                class="btn btn-sm btn-outline" 
                (click)="copyToClipboard(meeting()!.meetingLink)"
                aria-label="Copy meeting link"
              >
                📋
              </button>
            </div>
          </div>
          <div class="info-item">
            <span class="label">Meeting Code:</span>
            <div class="value-with-action">
              <span class="value">{{ meeting()!.meetingCode }}</span>
              <button 
                class="btn btn-sm btn-outline" 
                (click)="copyToClipboard(meeting()!.meetingCode)"
                aria-label="Copy meeting code"
              >
                📋
              </button>
            </div>
          </div>
          <div class="info-item" *ngIf="meeting()!.projectName">
            <span class="label">Project:</span>
            <span class="value">{{ meeting()!.projectName }}</span>
          </div>
        </div>
      </div>

      <!-- Participants Card -->
      <div class="info-card">
        <h3>Participants ({{ meeting()!.participants.length }})</h3>
        <div class="participants-list">
          <div 
            *ngFor="let participant of meeting()!.participants" 
            class="participant-item"
          >
            <div class="participant-info">
              <div class="participant-avatar">
                {{ participant.name.charAt(0) }}
              </div>
              <div class="participant-details">
                <span class="participant-name">{{ participant.name }}</span>
                <span class="participant-email">{{ participant.email }}</span>
                <span class="participant-role">{{ participant.role }}</span>
              </div>
            </div>
            <div class="participant-status">
              <span 
                class="status-badge" 
                [class]="getParticipantStatusClass(participant.status)"
              >
                {{ participant.status }}
              </span>
            </div>
          </div>
        </div>
      </div>

      <!-- Agenda Card -->
      <div class="info-card">
        <h3>Agenda</h3>
        <div class="agenda-list">
          <div 
            *ngFor="let item of meeting()!.agenda; let i = index" 
            class="agenda-item"
          >
            <span class="agenda-number">{{ i + 1 }}</span>
            <span class="agenda-text">{{ item }}</span>
          </div>
        </div>
      </div>

      <!-- Meeting Actions Card -->
      <div class="info-card">
        <h3>Meeting Actions</h3>
        <div class="actions-list">
          <button 
            *ngIf="meeting()!.status === 'scheduled'"
            class="btn btn-primary btn-block"
            (click)="joinMeeting()"
          >
            <span class="icon">🎥</span>
            Join Meeting
          </button>
          <button 
            *ngIf="meeting()!.recordingUrl"
            class="btn btn-secondary btn-block"
            (click)="openRecording()"
          >
            <span class="icon">📹</span>
            Watch Recording
          </button>
          <button 
            *ngIf="meeting()!.transcriptUrl"
            class="btn btn-outline btn-block"
            (click)="navigateToTranscript()"
          >
            <span class="icon">📝</span>
            Read Transcript
          </button>
          <button 
            *ngIf="meeting()!.summaryUrl"
            class="btn btn-outline btn-block"
            (click)="navigateToSummary()"
          >
            <span class="icon">📊</span>
            View Summary
          </button>
          <button class="btn btn-outline btn-block">
            <span class="icon">📧</span>
            Send Follow-up
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
