<div class="reports-page">
  <!-- Header -->
  <div class="page-header">
    <div class="header-content">
      <h1>B√°o C√°o & Ph√¢n T√≠ch</h1>
      <p>Xem b√°o c√°o chi ti·∫øt v√† ph√¢n t√≠ch hi·ªáu su·∫•t kinh doanh c·ªßa b·∫°n</p>
    </div>
    <div class="header-actions">
      <select [(ngModel)]="selectedPeriod" class="period-select" title="Ch·ªçn kho·∫£ng th·ªùi gian" aria-label="Ch·ªçn kho·∫£ng th·ªùi gian">
        <option value="week">Tu·∫ßn n√†y</option>
        <option value="month">Th√°ng n√†y</option>
        <option value="quarter">Qu√Ω n√†y</option>
        <option value="year">NƒÉm nay</option>
      </select>
    </div>
  </div>

  <!-- Analytics Overview -->
  <div class="analytics-overview">
    <h2>Ch·ªâ S·ªë Ch√≠nh</h2>
    <div class="metrics-grid">
      <div class="metric-card">
        <div class="metric-icon">üìÅ</div>
        <div class="metric-content">
          <h3>{{ analytics().totalProjects }}</h3>
          <p>T·ªïng D·ª± √Ån</p>
          <span class="metric-detail">{{ analytics().activeProjects }} ƒêang ho·∫°t ƒë·ªông</span>
        </div>
      </div>

      <div class="metric-card">
        <div class="metric-icon">‚úÖ</div>
        <div class="metric-content">
          <h3>{{ formatPercentage(analytics().completionRate) }}</h3>
          <p>T·ª∑ L·ªá Ho√†n Th√†nh</p>
          <span class="metric-detail">{{ analytics().completedProjects }} ƒê√£ ho√†n th√†nh</span>
        </div>
      </div>

      <div class="metric-card">
        <div class="metric-icon">üìÖ</div>
        <div class="metric-content">
          <h3>{{ analytics().totalMeetings }}</h3>
          <p>T·ªïng Cu·ªôc H·ªçp</p>
          <span class="metric-detail">{{ analytics().averageProjectDuration }} ng√†y trung b√¨nh</span>
        </div>
      </div>

      <div class="metric-card">
        <div class="metric-icon">üë•</div>
        <div class="metric-content">
          <h3>{{ analytics().totalTeamMembers }}</h3>
          <p>Th√†nh Vi√™n Nh√≥m</p>
          <span class="metric-detail">ƒêang ƒë√≥ng g√≥p</span>
        </div>
      </div>

      <div class="metric-card">
        <div class="metric-icon">üí∞</div>
        <div class="metric-content">
          <h3>{{ formatCurrency(analytics().revenue) }}</h3>
          <p>T·ªïng Doanh Thu</p>
          <span class="metric-detail">{{ formatCurrency(analytics().expenses) }} Chi ph√≠</span>
        </div>
      </div>

      <div class="metric-card">
        <div class="metric-icon">üìä</div>
        <div class="metric-content">
          <h3>{{ formatCurrency(analytics().revenue - analytics().expenses) }}</h3>
          <p>L·ª£i Nhu·∫≠n R√≤ng</p>
          <span class="metric-detail">K·ª≥ n√†y</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Report Generation -->
  <div class="report-generation">
    <div class="section-header">
      <h2>T·∫°o B√°o C√°o</h2>
      <p>T·∫°o b√°o c√°o m·ªõi cho c√°c kh√≠a c·∫°nh kh√°c nhau c·ªßa kinh doanh</p>
    </div>
    
    <div class="report-types-grid">
      <div class="report-type-card" (click)="generateReport('project')">
        <div class="report-icon">üìÅ</div>
        <h3>B√°o C√°o D·ª± √Ån</h3>
        <p>Ph√¢n t√≠ch chi ti·∫øt hi·ªáu su·∫•t d·ª± √°n, th·ªùi gian v√† milestone</p>
        <button class="btn btn-primary">T·∫°o</button>
      </div>

      <div class="report-type-card" (click)="generateReport('team')">
        <div class="report-icon">üë•</div>
        <h3>B√°o C√°o Nh√≥m</h3>
        <p>Ch·ªâ s·ªë hi·ªáu su·∫•t nh√≥m, ph√¢n t√≠ch nƒÉng su·∫•t v√† ƒë√≥ng g√≥p c√° nh√¢n</p>
        <button class="btn btn-primary">T·∫°o</button>
      </div>

      <div class="report-type-card" (click)="generateReport('meeting')">
        <div class="report-icon">üìÖ</div>
        <h3>B√°o C√°o Cu·ªôc H·ªçp</h3>
        <p>Hi·ªáu qu·∫£ cu·ªôc h·ªçp, tham d·ª± v√† t·ª∑ l·ªá ho√†n th√†nh c√¥ng vi·ªác</p>
        <button class="btn btn-primary">T·∫°o</button>
      </div>

      <div class="report-type-card" (click)="generateReport('financial')">
        <div class="report-icon">üí∞</div>
        <h3>B√°o C√°o T√†i Ch√≠nh</h3>
        <p>Doanh thu, chi ph√≠, bi√™n l·ª£i nhu·∫≠n v√† d·ª± b√°o t√†i ch√≠nh</p>
        <button class="btn btn-primary">T·∫°o</button>
      </div>
    </div>
  </div>

  <!-- Reports List -->
  <div class="reports-section">
    <div class="section-header">
      <h2>B√°o C√°o G·∫ßn ƒê√¢y</h2>
      <div class="filter-controls">
        <select [(ngModel)]="selectedReportType" (change)="onReportTypeChange()" class="filter-select" title="Ch·ªçn lo·∫°i b√°o c√°o" aria-label="Ch·ªçn lo·∫°i b√°o c√°o">
          <option value="all">T·∫•t C·∫£ Lo·∫°i</option>
          <option value="project">B√°o C√°o D·ª± √Ån</option>
          <option value="team">B√°o C√°o Nh√≥m</option>
          <option value="meeting">B√°o C√°o Cu·ªôc H·ªçp</option>
          <option value="financial">B√°o C√°o T√†i Ch√≠nh</option>
        </select>
      </div>
    </div>

    <!-- Loading State -->
    <div *ngIf="isLoading()" class="loading-state">
      <div class="spinner"></div>
      <p>ƒêang t·∫£i b√°o c√°o...</p>
    </div>

    <!-- Reports List -->
    <div *ngIf="!isLoading()" class="reports-list">
      <div *ngFor="let report of filteredReports()" class="report-item">
        <div class="report-info">
          <div class="report-header">
            <div class="report-icon-small">
              {{ getTypeIcon(report.type) }}
            </div>
            <div class="report-details">
              <h3 class="report-title">{{ report.title }}</h3>
              <div class="report-meta">
                <span class="report-period">{{ report.period }}</span>
                <span class="report-date">T·∫°o: {{ report.generatedDate | date:'MMM dd, yyyy' }}</span>
                <span class="report-size">{{ report.size }}</span>
              </div>
            </div>
          </div>
          
          <div class="report-status">
            <span class="badge" [class]="getStatusBadgeClass(report.status)">
              {{ report.status }}
            </span>
          </div>
        </div>

        <div class="report-actions">
          <button 
            *ngIf="report.status === 'completed'"
            class="btn btn-secondary btn-sm" 
            (click)="downloadReport(report)"
          >
            <span class="icon">‚¨áÔ∏è</span>
            T·∫£i xu·ªëng
          </button>
          <button 
            *ngIf="report.status === 'processing'"
            class="btn btn-outline btn-sm" 
            disabled
          >
            <span class="icon">‚è≥</span>
            ƒêang x·ª≠ l√Ω...
          </button>
          <button class="btn btn-outline btn-sm">
            <span class="icon">üëÅÔ∏è</span>
            Xem tr∆∞·ªõc
          </button>
          <button class="btn btn-outline btn-sm">
            <span class="icon">üìß</span>
            Chia s·∫ª
          </button>
        </div>
      </div>
    </div>

    <!-- Empty State -->
    <div *ngIf="!isLoading() && filteredReports().length === 0" class="empty-state">
      <div class="empty-icon">üìä</div>
      <h3>Kh√¥ng t√¨m th·∫•y b√°o c√°o</h3>
      <p>T·∫°o b√°o c√°o ƒë·∫ßu ti√™n ƒë·ªÉ b·∫Øt ƒë·∫ßu v·ªõi ph√¢n t√≠ch.</p>
    </div>
  </div>

  <!-- Chart Placeholders -->
  <div class="charts-section">
    <div class="section-header">
      <h2>Ph√¢n T√≠ch Tr·ª±c Quan</h2>
      <p>Bi·ªÉu ƒë·ªì v√† ƒë·ªì th·ªã t∆∞∆°ng t√°c ƒë·ªÉ c√≥ c√°i nh√¨n t·ªët h∆°n</p>
    </div>
    
    <div class="charts-grid">
      <div class="chart-card">
        <h3>Ti·∫øn ƒê·ªô D·ª± √Ån</h3>
        <div class="chart-placeholder">
          <div class="chart-icon">üìà</div>
          <p>Bi·ªÉu ƒë·ªì th·ªùi gian ho√†n th√†nh d·ª± √°n</p>
          <span class="coming-soon">S·∫Øp c√≥</span>
        </div>
      </div>

      <div class="chart-card">
        <h3>Hi·ªáu Su·∫•t Nh√≥m</h3>
        <div class="chart-placeholder">
          <div class="chart-icon">üë•</div>
          <p>Ch·ªâ s·ªë nƒÉng su·∫•t c√° nh√¢n v√† nh√≥m</p>
          <span class="coming-soon">S·∫Øp c√≥</span>
        </div>
      </div>

      <div class="chart-card">
        <h3>Ph√¢n T√≠ch Cu·ªôc H·ªçp</h3>
        <div class="chart-placeholder">
          <div class="chart-icon">üìÖ</div>
          <p>Xu h∆∞·ªõng t·∫ßn su·∫•t v√† hi·ªáu qu·∫£ cu·ªôc h·ªçp</p>
          <span class="coming-soon">S·∫Øp c√≥</span>
        </div>
      </div>

      <div class="chart-card">
        <h3>T·ªïng Quan T√†i Ch√≠nh</h3>
        <div class="chart-placeholder">
          <div class="chart-icon">üí∞</div>
          <p>Ph√¢n t√≠ch doanh thu v√† chi ph√≠</p>
          <span class="coming-soon">S·∫Øp c√≥</span>
        </div>
      </div>
    </div>
  </div>
</div>
